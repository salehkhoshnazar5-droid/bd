{% extends "base.html" %}
{% block title %}Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h4 class="mb-0">ğŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±</h4>
    <a href="/admin/logout" class="btn btn-outline-danger btn-sm">Ø®Ø±ÙˆØ¬</a>
</div>
<div class="row g-3 mb-4">
  <div class="col-md-3">
  <div class="card text-center shadow-sm border-primary">
    <div class="card-body">
      <h6 class="text-muted">ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h6>
      <h2 class="text-primary">{{ total_users }}</h2>
    </div>
  </div>
</div>

<div class="col-md-3">
  <div class="card text-center shadow-sm border-info"> <!-- ØªØºÛŒÛŒØ± Ø¨Ù‡ Ø±Ù†Ú¯ Ø¢Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ø§Ø´ÛŒÙ‡ -->
    <div class="card-body">
      <h6 class="text-muted">Ú©Ù„ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§</h6>
      <h2 class="text-info">{{ total_events }}</h2> <!-- ØªØºÛŒÛŒØ± Ø¨Ù‡ Ø±Ù†Ú¯ Ø¢Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ Ù…ØªÙ† -->
    </div>
  </div>
</div>

<div class="col-md-3">
  <div class="card text-center shadow-sm border-success"> <!-- ØªØºÛŒÛŒØ± Ø¨Ù‡ Ø±Ù†Ú¯ Ø³Ø¨Ø² Ø¨Ø±Ø§ÛŒ Ø­Ø§Ø´ÛŒÙ‡ -->
    <div class="card-body">
      <h6 class="text-muted">Ø¯Ø§Ù†Ø´ÙˆØ±Ø§Ù† Ø¢Ù…ÙˆØ²Ø´ Ù†ÙˆØ±</h6>
      <h2 class="text-success">{{ quran_class_requests|length }}</h2> <!-- ØªØºÛŒÛŒØ± Ø¨Ù‡ Ø±Ù†Ú¯ Ø³Ø¨Ø² Ø¨Ø±Ø§ÛŒ Ù…ØªÙ† -->
    </div>
  </div>
</div>

<div class="col-md-3">
  <div class="card text-center shadow-sm border-warning">
    <div class="card-body">
      <h6 class="text-muted">Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù† Ù…Ø³ÛŒØ± Ù†ÙˆØ±</h6>
      <h2 class="text-warning">{{ light_path_rows|length }}</h2> <!-- Ø±Ù†Ú¯ Ø²Ø±Ø¯ Ø¨Ø±Ø§ÛŒ Ù…ØªÙ† -->
    </div>
  </div>
</div>
</div>

<div class="card mb-4 shadow-sm">
  <div class="card-header bg-success text-white">Ø§Ù„Ù) Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ù†Ø´ÙˆØ±Ø§Ù† Ø¢Ù…ÙˆØ²Ø´ Ù†ÙˆØ±</div>
  <div class="card-body">


    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead><tr><th>Ù†Ø§Ù…</th><th>Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</th><th>Ø³Ø·Ø­</th><th>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª</th><th>Ù…Ø¯ÛŒØ±ÛŒØª</th></tr></thead>
        <tbody>
          {% for request_item in quran_class_requests %}
          <tr>
            <td>{{ request_item.first_name }}</td>
            <td>{{ request_item.last_name }}</td>
            <td>{{ request_item.level }}</td>
            <td>{{ format_persian_datetime(request_item.created_at) if request_item.created_at else '-' }}</td>
            <td>
              <form method="post" action="/admin/quran-requests/{{ request_item.id }}/delete">
                <button class="btn btn-sm btn-outline-danger" type="submit">Ø­Ø°Ù</button>
              </form>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="5" class="text-center text-muted">Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="card mb-4 shadow-sm">
  <div class="card-header bg-warning">Ø¨) Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù† Ù…Ø³ÛŒØ± Ù†ÙˆØ±</div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead><tr><th>Ù†Ø§Ù…</th><th>Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</th><th>Ø´Ù…Ø§Ø±Ù‡ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ</th><th>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª</th><th>Ù…Ø¯ÛŒØ±ÛŒØª</th></tr></thead>
        <tbody>
          {% for row in light_path_rows %}
          <tr>
            <td>{{ row.record.first_name or '-' }}</td>
            <td>{{ row.record.last_name or '-' }}</td>
            <td>{{ row.level }}</td>
            <td><span class="badge bg-secondary">{{ row.status }}</span></td>
            <td>{{ row.record.student_number or '-' }}</td>
            <td>{{ format_persian_datetime(row.record.created_at) if row.record.created_at else '-' }}</td>
            <td>
              <form method="post" action="/admin/light-path-students/{{ row.record.id }}/edit" class="d-flex flex-column gap-1 mb-2">
                <div class="d-flex gap-1">
                  <input name="first_name" class="form-control form-control-sm" value="{{ row.record.first_name or '' }}" required>
                  <input name="last_name" class="form-control form-control-sm" value="{{ row.record.last_name or '' }}" required>
                </div>
                <input name="student_number" class="form-control form-control-sm" value="{{ row.record.student_number or '' }}" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ">
                <button class="btn btn-sm btn-outline-primary" type="submit">Ø°Ø®ÛŒØ±Ù‡</button>
              </form>
              <form method="post" action="/admin/light-path-students/{{ row.record.id }}/delete">
                <button class="btn btn-sm btn-outline-danger w-100" type="submit">Ø­Ø°Ù</button>
                <a href="http://kerman_bd/admin/dashboard" class="btn btn-outline-danger w-100">Ø®Ø±ÙˆØ¬</a>
              </form>
            </td>
          </tr>
          {% else %}
          <tr><td colspan="7" class="text-center text-muted">Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %}